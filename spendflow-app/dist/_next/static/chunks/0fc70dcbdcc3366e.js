(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73755,e=>{"use strict";e.i(52621),e.i(82078);var t=e.i(69834),a=e.i(2188),r=e.i(65131);class c{static instance;constructor(){}static getInstance(){return c.instance||(c.instance=new c),c.instance}async checkFeatureAccess(e,a,r={}){try{if(await this.isUserAdmin(e))return{allowed:!0,reason:"Admin access - no limits applied",currentUsage:r.currentCount,limit:-1};let c=await t.subscriptionService.getUserLimits(e);if(!c[a])return{allowed:!1,reason:"This feature is not available on your current plan",upgradeRequired:!0};if(void 0!==r.currentCount&&"number"==typeof c[a]){let e=c[a];if(-1===e||r.currentCount<e)return{allowed:!0,currentUsage:r.currentCount,limit:-1===e?void 0:e};return{allowed:!1,reason:`You've reached your plan limit of ${e} ${a}`,upgradeRequired:!0,currentUsage:r.currentCount,limit:e}}return{allowed:!0}}catch(e){return console.error("Error checking feature access:",e),{allowed:!0,reason:"Unable to verify access, proceeding..."}}}async canAddCard(e){let t=await this.getCurrentCardCount(e);return this.checkFeatureAccess(e,"maxCards",{currentCount:t})}async canAddTransaction(e){let t=await this.getCurrentTransactionCount(e);return this.checkFeatureAccess(e,"maxTransactions",{currentCount:t})}async canExportData(e){return this.checkFeatureAccess(e,"export")}async canAccessAnalytics(e){return this.checkFeatureAccess(e,"analytics")}async canAccessAPI(e){return this.checkFeatureAccess(e,"apiAccess")}async hasPrioritySupport(e){return(await this.checkFeatureAccess(e,"prioritySupport")).allowed}async getUserLimits(e){return t.subscriptionService.getUserLimits(e)}async getUserPlanInfo(e){let a=await t.subscriptionService.getUserSubscription(e);if(!a)return null;let r=await t.subscriptionService.getPlan(a.planId);return{subscription:a,plan:r}}async isUserAdmin(t){try{let{usersService:a}=await e.A(76860),r=await a.get(t);if(r?.email&&("spendflowapp@gmail.com".split(",")||[]).includes(r.email))return!0;return r?.isAdmin===!0}catch(e){return console.error("Error checking admin status:",e),!1}}async getCurrentCardCount(t){try{let{cardsService:a}=await e.A(76860);return(await a.getByUserId(t)).length}catch(e){return console.error("Error getting card count:",e),0}}async getCurrentTransactionCount(t){try{let{transactionsService:a}=await e.A(76860);return(await a.getByUserId(t)).length}catch(e){return console.error("Error getting transaction count:",e),0}}}function n(){let{user:e}=(0,a.useAuth)(),{canAccessFeature:t}=(0,r.useSubscription)();return{checkFeatureAccess:async(t,a={})=>e?e.email&&("spendflowapp@gmail.com".split(",")||[]).includes(e.email)?{allowed:!0,reason:"Admin access - no limits applied",currentUsage:a.currentCount,limit:-1}:s.checkFeatureAccess(e.uid,t,a):{allowed:!1,reason:"User not authenticated"},canAddCard:async()=>e?e.email&&("spendflowapp@gmail.com".split(",")||[]).includes(e.email)?{allowed:!0,reason:"Admin access - no limits applied",limit:-1}:s.canAddCard(e.uid):{allowed:!1,reason:"User not authenticated"},canAddTransaction:async()=>e?e.email&&("spendflowapp@gmail.com".split(",")||[]).includes(e.email)?{allowed:!0,reason:"Admin access - no limits applied",limit:-1}:s.canAddTransaction(e.uid):{allowed:!1,reason:"User not authenticated"},canExportData:async()=>e?s.canExportData(e.uid):{allowed:!1,reason:"User not authenticated"},canAccessAnalytics:async()=>e?s.canAccessAnalytics(e.uid):{allowed:!1,reason:"User not authenticated"},canAccessAPI:async()=>e?s.canAccessAPI(e.uid):{allowed:!1,reason:"User not authenticated"},hasPrioritySupport:async()=>!!e&&s.hasPrioritySupport(e.uid),canAccessFeature:t}}let s=c.getInstance();e.s(["accessControlService",0,s,"useAccessControl",()=>n])},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},92930,e=>{"use strict";let t=(0,e.i(75254).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],92930)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},14548,e=>{"use strict";var t=e.i(52621),a=e.i(82078),r=e.i(10176),c=e.i(44491),n=e.i(1570);let s=(0,c.cva)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:a,size:c,asChild:o=!1,...i},d)=>{let u=o?r.Slot:"button";return(0,t.jsx)(u,{className:(0,n.cn)(s({variant:a,size:c,className:e})),ref:d,...i})});o.displayName="Button",e.s(["Button",()=>o])},66775,53502,e=>{"use strict";let t;e.i(15525),e.i(64637);var a,r=e.i(60333);e.i(32234);var c=e.i(98466);e.i(75271);var n=e.i(5158);t=(0,r.getApps)().length?(0,r.getApp)():(0,r.initializeApp)({apiKey:"AIzaSyCbioszHdBJKCVzel9fy-iXa3k8uB6sS8I",authDomain:"chat-76d96.firebaseapp.com",projectId:"chat-76d96",storageBucket:"chat-76d96.firebasestorage.app",messagingSenderId:"950285925188",appId:"1:950285925188:web:ef7bf698a9571cafc5b511",measurementId:"G-BZZPT0RQNY"});let s=(0,c.getAuth)(t),o=(0,n.getFirestore)(t);e.s(["auth",0,s,"db",0,o],53502);var i=new Uint8Array(16);let d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=[],l=0;l<256;++l)u.push((l+256).toString(16).substr(1));let p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!("string"==typeof a&&d.test(a)))throw TypeError("Stringified UUID is invalid");return a},g=function(e,t,r){var c=(e=e||{}).random||(e.rng||function(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(i)})();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=c[n];return t}return p(c)},y="savingsAccounts",A="transfers";e.s(["savingsAccountsService",0,{async createAccount(e){let t=g(),a=new Date,r={...e,id:t,createdAt:a,updatedAt:a};return await (0,n.setDoc)((0,n.doc)(o,y,t),r),r},async getAccount(e){let t=(0,n.doc)(o,y,e),a=await (0,n.getDoc)(t);return a.exists()?{id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate(),updatedAt:a.data().updatedAt?.toDate()}:null},async getUserAccounts(e){let t=(0,n.query)((0,n.collection)(o,y),(0,n.where)("userId","==",e),(0,n.orderBy)("createdAt","desc"));return(await (0,n.getDocs)(t)).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate(),updatedAt:e.data().updatedAt?.toDate()}))},async updateAccount(e,t){let a=(0,n.doc)(o,y,e);await (0,n.updateDoc)(a,{...t,updatedAt:new Date})},async deleteAccount(e){let t=(0,n.doc)(o,y,e);await (0,n.deleteDoc)(t)},async createTransfer(e){let t=(0,n.writeBatch)(o),a=g(),r=new Date,c={...e,id:a,status:"pending",createdAt:r,updatedAt:r};try{let s=(0,n.doc)(o,A,a);if(t.set(s,c),"card"===e.fromAccountType){let a=await (0,n.getDoc)((0,n.doc)(o,"cards",e.fromAccountId)),c=a.data()?.balance||0,s=(0,n.doc)(o,"cards",e.fromAccountId);t.update(s,{balance:c-e.amount,updatedAt:r})}else{let a=await (0,n.getDoc)((0,n.doc)(o,y,e.fromAccountId)),c=a.data()?.balance||0,s=(0,n.doc)(o,y,e.fromAccountId);t.update(s,{balance:c-e.amount,updatedAt:r})}if("card"===e.toAccountType){let a=await (0,n.getDoc)((0,n.doc)(o,"cards",e.toAccountId)),c=a.data()?.balance||0,s=(0,n.doc)(o,"cards",e.toAccountId);t.update(s,{balance:c+e.amount,updatedAt:r})}else{let a=await (0,n.getDoc)((0,n.doc)(o,y,e.toAccountId)),c=a.data()?.balance||0,s=(0,n.doc)(o,y,e.toAccountId);t.update(s,{balance:c+e.amount,updatedAt:r})}let i={userId:e.userId,amount:e.amount,type:"transfer",category:"Transfer",description:e.description||"Account Transfer",date:r,isRecurring:!1,transferId:a},d=(0,n.doc)((0,n.collection)(o,"transactions"));t.set(d,{...i,["card"===e.fromAccountType?"cardId":"savingsAccountId"]:e.fromAccountId,type:"withdrawal"});let u=(0,n.doc)((0,n.collection)(o,"transactions"));return t.set(u,{...i,["card"===e.toAccountType?"cardId":"savingsAccountId"]:e.toAccountId,type:"deposit"}),t.update(s,{status:"completed"}),await t.commit(),c}catch(t){console.error("Transfer failed:",t);let e=(0,n.doc)(o,A,a);throw await (0,n.updateDoc)(e,{status:"failed",updatedAt:new Date}),Error("Transfer failed. Please try again.")}},async getTransfers(e){let t=(0,n.query)((0,n.collection)(o,A),(0,n.where)("userId","==",e),(0,n.orderBy)("createdAt","desc"));return(await (0,n.getDocs)(t)).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate(),updatedAt:e.data().updatedAt?.toDate()}))},async getTransfer(e){let t=(0,n.doc)(o,A,e),a=await (0,n.getDoc)(t);return a.exists()?{id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate(),updatedAt:a.data().updatedAt?.toDate()}:null}}],66775)},76860,e=>{e.v(e=>Promise.resolve().then(()=>e(30945)))}]);