(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77529,e=>{"use strict";let s=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>s],77529)},73884,e=>{"use strict";let s=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],73884)},87130,e=>{"use strict";let s=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>s],87130)},55436,e=>{"use strict";let s=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>s],55436)},11667,e=>{"use strict";var s=e.i(52621),t=e.i(82078),l=e.i(78894),a=e.i(77529),r=e.i(73884),c=e.i(3116),i=e.i(87130),n=e.i(55436),d=e.i(45423),o=e.i(63209),x=e.i(88368),m=e.i(82820),u=e.i(2188);function h(){let[e,h]=(0,t.useState)([]),[g,p]=(0,t.useState)(""),[j,b]=(0,t.useState)("all"),[v,f]=(0,t.useState)("all"),[N,w]=(0,t.useState)("all"),[y,A]=(0,t.useState)(!1),{user:k}=(0,u.useAuth)();(0,t.useEffect)(()=>{(async()=>{try{let e=(await m.alertsService.getAll()).map(e=>({...e,createdAt:e.createdAt instanceof Date?e.createdAt:e.createdAt?.toDate?.()||new Date,resolvedAt:e.resolvedAt instanceof Date?e.resolvedAt:e.resolvedAt?.toDate?.(),acknowledgedAt:e.acknowledgedAt instanceof Date?e.acknowledgedAt:e.acknowledgedAt?.toDate?.()}));h(e)}catch(e){console.error("Error loading alerts:",e),x.toast.error("Failed to load alerts - you may not have admin permissions")}})()},[]);let C=!!k?.email&&("spendflowapp@gmail.com".split(",")||[]).includes(k.email),S=(0,t.useMemo)(()=>{let s=e.filter(e=>e.title.toLowerCase().includes(g.toLowerCase())||e.message.toLowerCase().includes(g.toLowerCase()));return"all"!==j&&(s=s.filter(e=>e.status===j)),"all"!==v&&(s=s.filter(e=>e.type===v)),"all"!==N&&(s=s.filter(e=>e.category===N)),s},[e,g,j,v,N]);if(!C)return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-900/20 mb-4",children:(0,s.jsx)(l.AlertTriangle,{className:"h-6 w-6 text-red-400"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"Admin Access Required"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm",children:"You need administrator privileges to view and manage system alerts."})]})});let $=async(e,s)=>{try{await m.alertsService.updateStatus(e,s,"admin@example.com"),h(t=>t.map(t=>t.id===e?{...t,status:s,resolvedAt:"resolved"===s?new Date:t.resolvedAt,acknowledgedBy:"acknowledged"===s?"admin@example.com":t.acknowledgedBy}:t)),x.toast.success(`Alert ${"resolved"===s?"resolved":"acknowledged"===s?"acknowledged":"marked as active"}`)}catch(e){console.error("Error updating alert status:",e),x.toast.error("Failed to update alert status")}},T=async()=>{if(!window.confirm("Are you sure you want to clear all alerts? This action cannot be undone."))return;let s=e.length;console.log(`ðŸ—‘ï¸ Admin clearing ${s} alerts`);try{let t=e.map(e=>(console.log(`Deleting alert: ${e.id} - ${e.title}`),m.alertsService.delete(e.id)));await Promise.all(t),h([]),console.log(`âœ… Successfully cleared ${s} alerts`),x.toast.success(`Successfully cleared ${s} alerts`)}catch(e){console.error("âŒ Error clearing alerts:",e),x.toast.error("Failed to clear alerts. Please try again.")}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-serif text-slate-100",children:"Alert Management"}),(0,s.jsx)("p",{className:"text-slate-400 text-sm",children:"Search, filter, and manage system notifications"})]}),(0,s.jsxs)("div",{className:"w-full sm:w-auto flex gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1 sm:w-64",children:[(0,s.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),(0,s.jsx)("input",{type:"text",placeholder:"Search alerts...",className:"w-full pl-10 pr-4 py-2 bg-slate-900 border border-slate-700 rounded-md text-slate-200 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:g,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("button",{onClick:()=>A(!y),className:`px-3 py-2 rounded-md text-slate-300 flex items-center gap-2 transition-colors ${y?"bg-slate-700":"bg-slate-800 hover:bg-slate-700 border border-slate-700"}`,children:[(0,s.jsx)(i.Filter,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Filters"})]}),e.length>0&&(0,s.jsxs)("button",{onClick:T,className:"px-3 py-2 rounded-md text-red-400 hover:text-red-300 hover:bg-red-900/20 border border-red-700/50 flex items-center gap-2 transition-colors",title:"Clear all alerts",children:[(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Clear All"})]})]})]}),y&&(0,s.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Status"}),(0,s.jsxs)("select",{value:j,onChange:e=>b(e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-slate-200 text-sm rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"acknowledged",children:"Acknowledged"}),(0,s.jsx)("option",{value:"resolved",children:"Resolved"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Type"}),(0,s.jsxs)("select",{value:v,onChange:e=>f(e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-slate-200 text-sm rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[(0,s.jsx)("option",{value:"all",children:"All Types"}),(0,s.jsx)("option",{value:"critical",children:"Critical"}),(0,s.jsx)("option",{value:"warning",children:"Warning"}),(0,s.jsx)("option",{value:"info",children:"Info"}),(0,s.jsx)("option",{value:"success",children:"Success"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Category"}),(0,s.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-slate-200 text-sm rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[(0,s.jsx)("option",{value:"all",children:"All Categories"}),(0,s.jsx)("option",{value:"system",children:"System"}),(0,s.jsx)("option",{value:"security",children:"Security"}),(0,s.jsx)("option",{value:"performance",children:"Performance"}),(0,s.jsx)("option",{value:"database",children:"Database"}),(0,s.jsx)("option",{value:"api",children:"API"})]})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-slate-400",children:["Showing ",S.length," of ",e.length," alerts"]}),(0,s.jsx)("button",{onClick:()=>{b("all"),f("all"),w("all"),p("")},className:"text-sm text-amber-400 hover:text-amber-300",children:"Clear Filters"})]})]}),(0,s.jsx)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg overflow-hidden",children:0===S.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(a.CheckCircle,{className:"h-12 w-12 text-green-500 mx-auto mb-2"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-slate-300",children:"No alerts found"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm",children:"All systems are running smoothly"})]}):(0,s.jsx)("div",{className:"divide-y divide-slate-800",children:S.map(e=>{var t;let i;return(0,s.jsx)("div",{className:`p-6 border-l-4 ${(e=>{switch(e){case"critical":return"border-red-500 bg-red-900/10";case"warning":return"border-amber-500 bg-amber-900/10";case"info":return"border-blue-500 bg-blue-900/10";case"success":return"border-green-500 bg-green-900/10";default:return"border-slate-500 bg-slate-900/10"}})(e.type)}`,children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,s.jsx)("div",{className:"shrink-0 mt-0.5",children:(e=>{switch(e){case"critical":return(0,s.jsx)(r.XCircle,{className:"h-5 w-5 text-red-500"});case"warning":return(0,s.jsx)(l.AlertTriangle,{className:"h-5 w-5 text-amber-500"});case"info":return(0,s.jsx)(o.AlertCircle,{className:"h-5 w-5 text-blue-500"});case"success":return(0,s.jsx)(a.CheckCircle,{className:"h-5 w-5 text-green-500"});default:return(0,s.jsx)(d.Bell,{className:"h-5 w-5 text-slate-500"})}})(e.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-slate-100",children:e.title}),(e=>{let t="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium";switch(e){case"active":return(0,s.jsx)("span",{className:`${t} bg-red-900/30 text-red-400`,children:"Active"});case"acknowledged":return(0,s.jsx)("span",{className:`${t} bg-amber-900/30 text-amber-400`,children:"Acknowledged"});case"resolved":return(0,s.jsx)("span",{className:`${t} bg-green-900/30 text-green-400`,children:"Resolved"});default:return(0,s.jsx)("span",{className:`${t} bg-slate-800/50 text-slate-400`,children:e})}})(e.status)]}),(0,s.jsx)("p",{className:"text-slate-300 text-sm mb-2",children:e.message}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-slate-500",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(c.Clock,{className:"h-3 w-3 mr-1"}),(t=e.createdAt instanceof Date?e.createdAt:new Date,(i=Math.floor((new Date().getTime()-t.getTime())/1e3))<60?"Just now":i<3600?`${Math.floor(i/60)}m ago`:i<86400?`${Math.floor(i/3600)}h ago`:i<604800?`${Math.floor(i/86400)}d ago`:`${Math.floor(i/604800)}w ago`)]}),(0,s.jsxs)("span",{className:`font-medium ${(e=>{switch(e){case"critical":return"text-red-400";case"high":return"text-orange-400";case"medium":return"text-amber-400";case"low":return"text-green-400";default:return"text-slate-400"}})(e.priority)}`,children:[e.priority.charAt(0).toUpperCase()+e.priority.slice(1)," Priority"]}),(0,s.jsx)("span",{className:"text-slate-400 capitalize",children:e.category}),e.acknowledgedBy&&e.acknowledgedBy.trim()&&(0,s.jsxs)("span",{className:"text-slate-400",children:["Acknowledged by ",e.acknowledgedBy]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:["active"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>$(e.id,"acknowledged"),className:"px-3 py-1 text-xs bg-amber-600 hover:bg-amber-700 text-white rounded-md transition-colors",children:"Acknowledge"}),(0,s.jsx)("button",{onClick:()=>$(e.id,"resolved"),className:"px-3 py-1 text-xs bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:"Resolve"})]}),"acknowledged"===e.status&&(0,s.jsx)("button",{onClick:()=>$(e.id,"resolved"),className:"px-3 py-1 text-xs bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:"Resolve"})]})]})},e.id)})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(r.XCircle,{className:"h-8 w-8 text-red-500 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-slate-100",children:e.filter(e=>"critical"===e.type&&"active"===e.status).length}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Critical Alerts"})]})]})}),(0,s.jsx)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.AlertTriangle,{className:"h-8 w-8 text-amber-500 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-slate-100",children:e.filter(e=>"active"===e.status).length}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Active Alerts"})]})]})}),(0,s.jsx)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(a.CheckCircle,{className:"h-8 w-8 text-green-500 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-slate-100",children:e.filter(e=>"resolved"===e.status).length}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Resolved Today"})]})]})}),(0,s.jsx)("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.Bell,{className:"h-8 w-8 text-blue-500 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-slate-100",children:e.length}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Total Alerts"})]})]})})]})]})}e.s(["default",()=>h])},9229,e=>{e.n(e.i(11667))}]);