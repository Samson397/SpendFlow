(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},84099,e=>{"use strict";var t=e.i(52621),s=e.i(82078),a=e.i(20976),r=e.i(2188),l=e.i(31278);function n({children:e,requireAuth:n=!0}){let{user:i,loading:d}=(0,r.useAuth)(),m=(0,a.useRouter)();return((0,s.useEffect)(()=>{d||(n&&!i?m.push("/login"):!n&&i&&m.push("/dashboard"))},[i,d,n,m]),d)?(0,t.jsx)("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(l.Loader2,{className:"h-12 w-12 text-amber-400 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:"Loading..."})]})}):n&&!i||!n&&i?null:(0,t.jsx)(t.Fragment,{children:e})}e.s(["AuthGate",()=>n])},61659,e=>{"use strict";let t=(0,e.i(75254).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],61659)},36031,e=>{"use strict";e.i(75271);var t=e.i(5158),s=e.i(41195);let a="recurringExpenses";e.s(["recurringExpensesService",0,{async create(e){let r=new Date().toISOString();return(await (0,t.addDoc)((0,t.collection)(s.db,a),{...e,createdAt:r,updatedAt:r})).id},async getByUserId(e){let r=(0,t.query)((0,t.collection)(s.db,a),(0,t.where)("userId","==",e),(0,t.where)("isActive","==",!0),(0,t.orderBy)("dayOfMonth","asc"));return(await (0,t.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}))},async getDueExpenses(e){let r=new Date,l=r.getDate(),n=r.toISOString().slice(0,7),i=(0,t.query)((0,t.collection)(s.db,a),(0,t.where)("userId","==",e),(0,t.where)("isActive","==",!0));return(await (0,t.getDocs)(i)).docs.map(e=>({id:e.id,...e.data()})).filter(e=>{let t=(e.lastProcessed||"").slice(0,7);return e.dayOfMonth===l&&t!==n})},async update(e,r){let l=(0,t.doc)(s.db,a,e);await (0,t.updateDoc)(l,{...r,updatedAt:new Date().toISOString()})},async markProcessed(e){let r=(0,t.doc)(s.db,a,e);await (0,t.updateDoc)(r,{lastProcessed:new Date().toISOString(),updatedAt:new Date().toISOString()})},async delete(e){let r=(0,t.doc)(s.db,a,e);await (0,t.updateDoc)(r,{isActive:!1,updatedAt:new Date().toISOString()})},async hardDelete(e){let r=(0,t.doc)(s.db,a,e);await (0,t.deleteDoc)(r)}}])},80709,e=>{"use strict";var t=e.i(52621),s=e.i(82078),a=e.i(2188),r=e.i(38957),l=e.i(75254);let n=(0,l.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),i=(0,l.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var d=e.i(3116),m=e.i(61659),c=e.i(27612),x=e.i(30945),o=e.i(36031),h=e.i(84099),p=e.i(83218);function u(){let e,l,h,{user:u}=(0,a.useAuth)(),{formatAmount:g}=(0,r.useCurrency)(),{toast:b}=(0,p.useToast)(),[v,f]=(0,s.useState)(new Date),[j,y]=(0,s.useState)([]),[w,N]=(0,s.useState)([]),[D,S]=(0,s.useState)(!0),[k,A]=(0,s.useState)(!1),T=(0,s.useRef)(null),[E,M]=(0,s.useState)(null),[C,P]=(0,s.useState)(null),[I,$]=(0,s.useState)(null);(0,s.useEffect)(()=>{A("ontouchstart"in window||navigator.maxTouchPoints>0)},[]),(0,s.useEffect)(()=>{if(!u)return;O();let e=setInterval(O,3e4),t=()=>O();return window.addEventListener("focus",t),()=>{clearInterval(e),window.removeEventListener("focus",t)}},[u]);let O=async()=>{try{S(!0);let e=await o.recurringExpensesService.getByUserId(u.uid);y(e.filter(e=>e.isActive));let t=(await x.cardsService.getByUserId(u.uid)).filter(e=>"credit"===e.type&&e.isActive&&e.paymentDueDay);N(t)}catch(e){console.error("Error loading calendar data:",e)}finally{S(!1)}},F=()=>{f(new Date(v.getFullYear(),v.getMonth()-1,1))},L=()=>{f(new Date(v.getFullYear(),v.getMonth()+1,1))},R=async e=>{if(u)try{await o.recurringExpensesService.delete(e);let t=await o.recurringExpensesService.getByUserId(u.uid);y(t.filter(e=>e.isActive)),b({title:"Expense deleted",description:"The recurring expense has been removed."}),$(null)}catch(e){console.error("Error deleting expense:",e),b({title:"Error",description:"Failed to delete the expense. Please try again.",variant:"destructive"})}},{daysInMonth:B,startingDayOfWeek:q,year:U,month:Y}=(e=v.getFullYear(),h=new Date(e,l=v.getMonth(),1),{daysInMonth:new Date(e,l+1,0).getDate(),startingDayOfWeek:h.getDay(),year:e,month:l}),J=["January","February","March","April","May","June","July","August","September","October","November","December"],z=new Date,G=z.getMonth()===Y&&z.getFullYear()===U,K=z.getDate();return D?(0,t.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,t.jsx)("div",{className:"text-amber-400 text-lg font-serif tracking-wider",children:"Loading..."})}):(0,t.jsxs)("div",{className:"space-y-6 sm:space-y-8 md:space-y-12 px-2 sm:px-4 max-w-7xl mx-auto","data-touch":k?"true":"false",children:[(0,t.jsxs)("div",{className:"text-center px-2 sm:px-4",children:[(0,t.jsx)("div",{className:"w-8 sm:w-12 md:w-16 h-0.5 bg-linear-to-r from-transparent via-amber-400 to-transparent mx-auto mb-3 sm:mb-4 md:mb-8"}),(0,t.jsx)("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-serif text-slate-100 mb-2 sm:mb-4 tracking-wide",children:"C A L E N D A R"}),(0,t.jsx)("div",{className:"w-12 sm:w-16 md:w-24 h-0.5 bg-linear-to-r from-transparent via-amber-400 to-transparent mx-auto mb-3 sm:mb-4 md:mb-6"}),(0,t.jsx)("p",{className:"text-slate-400 text-xs sm:text-sm tracking-widest uppercase",children:"Recurring Payments Schedule"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4 sm:mb-6 md:mb-8 px-1 sm:px-0",children:[(0,t.jsxs)("button",{onClick:F,className:"flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-4 md:px-6 py-2 sm:py-2.5 md:py-3 border border-slate-700 text-slate-300 hover:border-amber-600/50 hover:text-amber-400 transition-all touch-manipulation min-h-[40px] sm:min-h-[44px] md:min-h-auto rounded-md",children:[(0,t.jsx)(n,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 md:h-5 md:w-5"}),(0,t.jsx)("span",{className:"font-serif tracking-wider text-xs sm:text-sm md:text-base hidden xs:inline",children:"Previous"})]}),(0,t.jsxs)("div",{className:"text-center px-2 sm:px-4 flex-1 max-w-xs sm:max-w-sm",children:[(0,t.jsxs)("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-serif text-slate-100 tracking-wide",children:[J[Y]," ",U]}),(0,t.jsxs)("div",{className:"text-slate-500 text-xs sm:text-sm tracking-wider mt-0.5 sm:mt-1 md:mt-2",children:[j.length," Recurring â€¢ ",w.length," Cards"]}),k&&(0,t.jsx)("div",{className:"text-slate-600 text-xs mt-0.5 sm:mt-1",children:"Swipe to navigate"})]}),(0,t.jsxs)("button",{onClick:L,className:"flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-4 md:px-6 py-2 sm:py-2.5 md:py-3 border border-slate-700 text-slate-300 hover:border-amber-600/50 hover:text-amber-400 transition-all touch-manipulation min-h-[40px] sm:min-h-[44px] md:min-h-auto rounded-md",children:[(0,t.jsx)("span",{className:"font-serif tracking-wider text-xs sm:text-sm md:text-base hidden xs:inline",children:"Next"}),(0,t.jsx)(i,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 md:h-5 md:w-5"})]})]}),(0,t.jsxs)("div",{ref:T,className:"bg-slate-900/50 border border-slate-800 backdrop-blur-sm p-2 sm:p-3 md:p-4 lg:p-6 xl:p-8 mx-auto max-w-full overflow-x-auto",onTouchStart:e=>{k&&e.touches[0]&&(M(e.touches[0].clientX),P(e.touches[0].clientY))},onTouchEnd:e=>{if(!k||null===E||null===C||!e.changedTouches[0])return;let t=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY,a=t-E;Math.abs(a)>Math.abs(s-C)&&Math.abs(a)>50&&(a>0?F():L()),M(null),P(null)},children:[(0,t.jsx)("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1 md:gap-2 lg:gap-3 xl:gap-4 mb-2 sm:mb-3 md:mb-4 min-w-[280px] sm:min-w-0",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,t.jsx)("div",{className:"text-center p-1",children:(0,t.jsx)("div",{className:"text-amber-400 text-xs sm:text-sm tracking-widest uppercase font-serif py-0.5 sm:py-1 md:py-2",children:k?e.charAt(0):e})},e))}),(0,t.jsxs)("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1 md:gap-2 lg:gap-3 xl:gap-4 min-w-[280px] sm:min-w-0",children:[Array.from({length:q}).map((e,s)=>(0,t.jsx)("div",{className:"aspect-square sm:aspect-4/3 md:aspect-square min-h-[45px] sm:min-h-[50px] md:min-h-[60px] lg:min-h-[70px]"},`empty-${s}`)),Array.from({length:B}).map((e,s)=>{let a=s+1,r=j.filter(e=>e.dayOfMonth===a),l=w.filter(e=>e.paymentDueDay===a),n=G&&a===K,i=r.length>0||l.length>0,x=I===a;return(0,t.jsxs)("div",{className:`relative ${k?"aspect-4/3 min-h-[45px] sm:min-h-[50px]":"aspect-square min-h-[45px] sm:min-h-[60px] md:min-h-[70px] lg:min-h-[80px]"} border ${n?"border-amber-600 bg-amber-900/20":x?"border-amber-500 bg-amber-900/30":"border-slate-800 bg-slate-900/30"} p-0.5 sm:p-1 md:p-1.5 lg:p-2 hover:border-amber-600/50 focus:border-amber-600/50 active:border-amber-600/50 transition-all rounded-sm ${i?"cursor-pointer":""}`,onClick:()=>{i&&$(x?null:a)},onTouchStart:e=>{if(!k)return;let t=e.currentTarget;t&&t.classList.add("bg-slate-800/50")},onTouchEnd:e=>{k&&setTimeout(()=>{let t=e.currentTarget;t&&t.classList.remove("bg-slate-800/50")},200)},tabIndex:i?0:-1,children:[(0,t.jsx)("div",{className:`text-xs sm:text-sm font-serif font-medium ${n?"text-amber-400":"text-slate-300"} mb-0.5 sm:mb-1 leading-tight`,children:a}),i&&(0,t.jsxs)("div",{className:"space-y-0.5",children:[r.slice(0,k?2:1).map((e,s)=>(0,t.jsx)("div",{className:"text-[10px] sm:text-xs px-0.5 py-0.5 border-l-2 border-red-500 bg-red-900/20 text-red-300 truncate rounded",title:k?void 0:`${e.name} - ${g(e.amount)}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,t.jsx)(d.Clock,{className:"h-1.5 w-1.5 sm:h-2 sm:w-2"}),(0,t.jsx)("span",{className:"truncate text-[10px] sm:text-xs",children:e.name})]})},`expense-${s}`)),l.slice(0,k?2:1).map((e,s)=>(0,t.jsx)("div",{className:"text-[10px] sm:text-xs px-0.5 py-0.5 border-l-2 border-blue-500 bg-blue-900/20 text-blue-300 truncate rounded",title:k?void 0:`${e.name} Payment Due`,children:(0,t.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,t.jsx)(m.CreditCard,{className:"h-1.5 w-1.5 sm:h-2 sm:w-2"}),(0,t.jsx)("span",{className:"truncate text-[10px] sm:text-xs",children:k?"Payment":`${e.name} Payment`})]})},`card-${s}`)),k&&i&&(0,t.jsx)("div",{className:"flex items-center justify-center mt-0.5",children:(0,t.jsx)("div",{className:"text-[9px] text-slate-400 opacity-60 bg-slate-700/30 px-1 py-0.5 rounded",children:"Tap"})}),!k&&r.length+l.length>1&&(0,t.jsx)("div",{className:"flex items-center justify-center gap-1 mt-0.5",children:(0,t.jsx)("div",{className:"px-1 py-0.5 bg-slate-700/50 rounded text-[9px]",children:(0,t.jsx)("span",{className:"text-amber-400 font-medium",children:r.length+l.length})})}),r.length+l.length>(k?4:2)&&(0,t.jsxs)("div",{className:"text-[9px] text-slate-500 text-center mt-0.5",children:["+",r.length+l.length-(k?4:2)]})]}),i&&x&&(0,t.jsxs)("div",{className:`absolute left-1/2 top-full mt-1 sm:mt-2 transform -translate-x-1/2 ${k?"w-[calc(100vw-2rem)] max-w-sm":"w-64"} bg-slate-800 border border-slate-700 p-2 sm:p-3 z-20 shadow-lg rounded-md`,children:[(0,t.jsxs)("div",{className:"text-xs text-amber-400 mb-2 font-serif tracking-wider",children:[J[Y]," ",a,", ",U]}),r.length+l.length>1&&(0,t.jsxs)("div",{className:"mb-2 sm:mb-3 p-2 bg-slate-700/50 rounded text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-slate-300 font-medium",children:"Summary:"}),(0,t.jsxs)("span",{className:"text-amber-400 font-medium",children:[r.length+l.length," items"]})]}),r.length>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-red-400",children:[(0,t.jsx)("span",{children:"ðŸ’° Expenses:"}),(0,t.jsx)("span",{children:g(r.reduce((e,t)=>e+t.amount,0))})]}),l.length>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-blue-400",children:[(0,t.jsx)("span",{children:"ðŸ’³ Payments:"}),(0,t.jsxs)("span",{children:[l.length," due"]})]})]}),(0,t.jsxs)("div",{className:`space-y-2 ${k?"max-h-32 overflow-y-auto":""}`,children:[r.map((e,s)=>(0,t.jsxs)("div",{className:"text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-slate-300",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-red-400",children:g(e.amount)}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),window.confirm(`Delete "${e.name}"?`)&&R(e.id)},className:"text-slate-500 hover:text-red-400 transition-colors p-1 hover:bg-slate-700 rounded",title:"Delete expense",children:(0,t.jsx)(c.Trash2,{className:"h-3 w-3"})})]})]}),(0,t.jsx)("div",{className:"text-slate-500",children:e.category})]},`exp-${s}`)),l.map((e,s)=>(0,t.jsxs)("div",{className:"text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-slate-300",children:e.name}),(0,t.jsx)("span",{className:"text-blue-400",children:"Due"})]}),(0,t.jsx)("div",{className:"text-slate-500",children:"Credit Card Payment"})]},`crd-${s}`))]})]})]},a)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:[(0,t.jsx)("div",{className:"bg-slate-900/50 border border-slate-800 p-3 sm:p-4 md:p-6 lg:p-8 backdrop-blur-sm rounded-lg",children:(0,t.jsxs)("div",{className:"border-l-2 border-red-600 pl-3 sm:pl-4 md:pl-6",children:[(0,t.jsx)("div",{className:"text-slate-500 text-xs tracking-widest uppercase mb-2 font-serif",children:"Monthly Recurring Expenses"}),(0,t.jsx)("div",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-serif text-slate-100 mb-2",children:g(j.reduce((e,t)=>e+t.amount,0))}),(0,t.jsxs)("div",{className:"text-slate-500 text-sm",children:[j.length," recurring expense",1!==j.length?"s":""]})]})}),(0,t.jsx)("div",{className:"bg-slate-900/50 border border-slate-800 p-3 sm:p-4 md:p-6 lg:p-8 backdrop-blur-sm rounded-lg",children:(0,t.jsxs)("div",{className:"border-l-2 border-blue-600 pl-3 sm:pl-4 md:pl-6",children:[(0,t.jsx)("div",{className:"text-slate-500 text-xs tracking-widest uppercase mb-2 font-serif",children:"Credit Card Payments"}),(0,t.jsx)("div",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-serif text-slate-100 mb-2",children:w.length}),(0,t.jsxs)("div",{className:"text-slate-500 text-sm",children:["Credit card",1!==w.length?"s":""," with payments due"]})]})})]}),(0,t.jsx)("div",{className:"text-center pt-6 sm:pt-8 md:pt-12 border-t border-slate-800 px-2 sm:px-4",children:(0,t.jsx)("p",{className:"text-slate-500 text-xs sm:text-sm font-serif italic max-w-2xl mx-auto",children:'"Plan your finances with precision and foresight."'})})]})}function g(){return(0,t.jsx)(h.AuthGate,{children:(0,t.jsx)(u,{})})}e.s(["default",()=>g],80709)}]);