(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43488,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},20976,(e,t,r)=>{t.exports=e.r(59536)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},84099,e=>{"use strict";var t=e.i(52621),r=e.i(82078),s=e.i(20976),n=e.i(2188),i=e.i(31278);function a({children:e,requireAuth:a=!0}){let{user:o,loading:l}=(0,n.useAuth)(),c=(0,s.useRouter)();return((0,r.useEffect)(()=>{l||(a&&!o?c.push("/login"):!a&&o&&c.push("/dashboard"))},[o,l,a,c]),l)?(0,t.jsx)("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(i.Loader2,{className:"h-12 w-12 text-amber-400 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:"Loading..."})]})}):a&&!o||!a&&o?null:(0,t.jsx)(t.Fragment,{children:e})}e.s(["AuthGate",()=>a])},30761,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={assign:function(){return l},searchParamsToUrlQuery:function(){return i},urlQueryToSearchParams:function(){return o}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});function i(e){let t={};for(let[r,s]of e.entries()){let e=t[r];void 0===e?t[r]=s:Array.isArray(e)?e.push(s):t[r]=[e,s]}return t}function a(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,s]of Object.entries(e))if(Array.isArray(s))for(let e of s)t.append(r,a(e));else t.set(r,a(s));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,s]of r.entries())e.append(t,s)}return e}},18244,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={formatUrl:function(){return o},formatWithValidation:function(){return c},urlObjectKeys:function(){return l}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let i=e.r(24320)._(e.r(30761)),a=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,s=e.protocol||"",n=e.pathname||"",o=e.hash||"",l=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),l&&"object"==typeof l&&(l=String(i.urlQueryToSearchParams(l)));let u=e.search||l&&`?${l}`||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||a.test(s))&&!1!==c?(c="//"+(c||""),n&&"/"!==n[0]&&(n="/"+n)):c||(c=""),o&&"#"!==o[0]&&(o="#"+o),u&&"?"!==u[0]&&(u="?"+u),n=n.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${s}${c}${n}${u}${o}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return o(e)}},66781,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return n}});let s=e.r(82078);function n(e,t){let r=(0,s.useRef)(null),n=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(r.current=i(e,s)),t&&(n.current=i(t,s))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},20627,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DecodeError:function(){return b},MiddlewareNotFoundError:function(){return w},MissingStaticPage:function(){return x},NormalizeError:function(){return v},PageNotFoundError:function(){return y},SP:function(){return p},ST:function(){return h},WEB_VITALS:function(){return i},execOnce:function(){return a},getDisplayName:function(){return d},getLocationOrigin:function(){return c},getURL:function(){return u},isAbsoluteUrl:function(){return l},isResSent:function(){return f},loadGetInitialProps:function(){return g},normalizeRepeatedSlashes:function(){return m},stringifyError:function(){return j}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let i=["CLS","FCP","FID","INP","LCP","TTFB"];function a(e){let t,r=!1;return(...s)=>(r||(r=!0,t=e(...s)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>o.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=c();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function m(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function g(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await g(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(r&&f(r))return s;if(!s)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let p="undefined"!=typeof performance,h=p&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class b extends Error{}class v extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class x extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class w extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function j(e){return JSON.stringify({message:e.message,stack:e.stack})}},66357,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return i}});let s=e.r(20627),n=e.r(78843);function i(e){if(!(0,s.isAbsoluteUrl)(e))return!0;try{let t=(0,s.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,n.hasBasePath)(r.pathname)}catch(e){return!1}}},96056,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},11943,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return b},useLinkStatus:function(){return y}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let i=e.r(24320),a=e.r(52621),o=i._(e.r(82078)),l=e.r(18244),c=e.r(63165),u=e.r(66781),d=e.r(20627),f=e.r(41841);e.r(43488);let m=e.r(33433),g=e.r(66357),p=e.r(16321);function h(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function b(t){var r;let s,n,i,[l,b]=(0,o.useOptimistic)(m.IDLE_LINK_STATUS),y=(0,o.useRef)(null),{href:x,as:w,children:j,prefetch:E=null,passHref:S,replace:k,shallow:P,scroll:N,onClick:C,onMouseEnter:A,onTouchStart:O,legacyBehavior:D=!1,onNavigate:T,ref:_,unstable_dynamicOnHover:R,...I}=t;s=j,D&&("string"==typeof s||"number"==typeof s)&&(s=(0,a.jsx)("a",{children:s}));let $=o.default.useContext(c.AppRouterContext),M=!1!==E,L=!1!==E?null===(r=E)||"auto"===r?p.FetchStrategy.PPR:p.FetchStrategy.Full:p.FetchStrategy.PPR,{href:F,as:U}=o.default.useMemo(()=>{let e=h(x);return{href:e,as:w?h(w):e}},[x,w]);if(D){if(s?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});n=o.default.Children.only(s)}let z=D?n&&"object"==typeof n&&n.ref:_,q=o.default.useCallback(e=>(null!==$&&(y.current=(0,m.mountLinkInstance)(e,F,$,L,M,b)),()=>{y.current&&((0,m.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,m.unmountPrefetchableInstance)(e)}),[M,F,$,L,b]),B={ref:(0,u.useMergedRef)(q,z),onClick(t){D||"function"!=typeof C||C(t),D&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(t),!$||t.defaultPrevented||function(t,r,s,n,i,a,l){if("undefined"!=typeof window){let c,{nodeName:u}=t.currentTarget;if("A"===u.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,g.isLocalURL)(r)){i&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(843);o.default.startTransition(()=>{d(s||r,i?"replace":"push",a??!0,n.current)})}}(t,F,U,y,k,N,T)},onMouseEnter(e){D||"function"!=typeof A||A(e),D&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),$&&M&&(0,m.onNavigationIntent)(e.currentTarget,!0===R)},onTouchStart:function(e){D||"function"!=typeof O||O(e),D&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),$&&M&&(0,m.onNavigationIntent)(e.currentTarget,!0===R)}};return(0,d.isAbsoluteUrl)(U)?B.href=U:D&&!S&&("a"!==n.type||"href"in n.props)||(B.href=(0,f.addBasePath)(U)),i=D?o.default.cloneElement(n,B):(0,a.jsx)("a",{...I,...B,children:s}),(0,a.jsx)(v.Provider,{value:l,children:i})}e.r(96056);let v=(0,o.createContext)(m.IDLE_LINK_STATUS),y=()=>(0,o.useContext)(v);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},41530,e=>{"use strict";function t(e){let t=e?.code||e?.message||"unknown",r={"auth/invalid-credential":{title:"Invalid Credentials",message:"The email or password you entered is incorrect.",suggestion:"Please check your email and password and try again."},"auth/user-disabled":{title:"Account Disabled",message:"Your account has been disabled.",suggestion:"Please contact support for assistance."},"auth/user-not-found":{title:"Account Not Found",message:"No account found with this email address.",suggestion:"Please check your email or create a new account."},"auth/wrong-password":{title:"Incorrect Password",message:"The password you entered is incorrect.",suggestion:"Please try again or reset your password."},"auth/invalid-email":{title:"Invalid Email",message:"Please enter a valid email address.",suggestion:"Make sure your email follows the format: name@example.com"},"auth/email-already-in-use":{title:"Email Already in Use",message:"An account with this email already exists.",suggestion:"Try signing in instead, or use a different email address."},"auth/weak-password":{title:"Weak Password",message:"Your password is too weak.",suggestion:"Please use at least 6 characters with a mix of letters and numbers."},"auth/operation-not-allowed":{title:"Operation Not Allowed",message:"This sign-in method is not enabled.",suggestion:"Please contact support for assistance."},"auth/account-exists-with-different-credential":{title:"Account Exists",message:"An account already exists with this email using a different sign-in method.",suggestion:"Try signing in with the original method you used to create this account."},"auth/network-request-failed":{title:"Connection Error",message:"Unable to connect to our servers.",suggestion:"Please check your internet connection and try again."},"auth/timeout":{title:"Request Timeout",message:"The request timed out.",suggestion:"Please try again in a moment."},"auth/requires-recent-login":{title:"Re-authentication Required",message:"For security reasons, please sign in again.",suggestion:"Please sign out and sign back in to continue."},"auth/email-not-verified":{title:"Email Not Verified",message:"Please verify your email address before continuing.",suggestion:"Check your email for a verification link."},"auth/expired-action-code":{title:"Expired Link",message:"This password reset link has expired.",suggestion:"Please request a new password reset link."},"auth/invalid-action-code":{title:"Invalid Link",message:"This password reset link is invalid.",suggestion:"Please request a new password reset link."},"auth/user-mismatch":{title:"User Mismatch",message:"This link is for a different user.",suggestion:"Please make sure you're signed in with the correct account."},"auth/insufficient-permission":{title:"Sign Out Error",message:"There was an issue signing you out.",suggestion:"Try refreshing the page and signing out again."},"auth/too-many-requests":{title:"Too Many Attempts",message:"Too many failed attempts. Please try again later.",suggestion:"Wait a few minutes before trying again."},"auth/internal-error":{title:"Server Error",message:"An internal error occurred.",suggestion:"Please try again in a moment. If the problem persists, contact support."}};if(r[t])return r[t];for(let[e,s]of Object.entries(r))if(t.includes(e.split("/")[1]))return s;return{title:"Authentication Error",message:"An unexpected error occurred during authentication.",suggestion:"Please try again. If the problem persists, contact support."}}e.s(["getFirebaseAuthError",()=>t])},87432,e=>{"use strict";var t=e.i(41195);e.i(75271);var r=e.i(5158);function s(){let e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t=Array.from(e,e=>e.toString(16).padStart(2,"0")).join("");return`${t.slice(0,8)}-${t.slice(8,12)}-${t.slice(12,16)}-${t.slice(16,20)}-${t.slice(20,32)}`}class n{static async generateDeviceFingerprint(){let e=document.createElement("canvas").getContext("2d"),t=e?e.canvas.toDataURL():"",r="";try{let e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");if(t&&"function"==typeof t.getParameter){let e=t.getParameter(t.VENDOR)||"",s=t.getParameter(t.RENDERER)||"";r=e+s}}catch{}let s="";try{let e=new(window.AudioContext||window.webkitAudioContext)().createAnalyser();e.fftSize=1024;let t=e.frequencyBinCount,r=new Uint8Array(t);e.getByteFrequencyData(r),s=Array.from(r.slice(0,10)).join(",")}catch{}return{userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled,screenResolution:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,plugins:Array.from(navigator.plugins).map(e=>e.name),canvasFingerprint:t,webglFingerprint:r,audioFingerprint:s}}static async generateDeviceId(e){let t=JSON.stringify({userAgent:e.userAgent,platform:e.platform,screenResolution:e.screenResolution,timezone:e.timezone,canvasFingerprint:e.canvasFingerprint.substring(0,50),webglFingerprint:e.webglFingerprint}),r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r&=r;return Math.abs(r).toString(36)}static async registerDevice(e,s,n=!1,i){let a=await this.generateDeviceFingerprint(),o=await this.generateDeviceId(a),l=(0,r.doc)(t.db,"trustedDevices",`${e}_${o}`),c=await (0,r.getDoc)(l),u=r.Timestamp.now(),d=n?r.Timestamp.fromDate(new Date(Date.now()+7776e6)):void 0,f={userId:e,deviceId:o,fingerprint:a,deviceName:s,userAgent:navigator.userAgent,lastLogin:u,firstLogin:c.exists()?c.data().firstLogin:u,loginCount:c.exists()?(c.data().loginCount||0)+1:1,isTrusted:n,rememberMe:n,securityLevel:this.calculateSecurityLevel(a)};i&&(f.ipAddress=i),d&&(f.trustExpires=d);let m=Object.fromEntries(Object.entries(f).filter(([,e])=>void 0!==e));return await (0,r.setDoc)(l,m),{id:l.id,...f}}static async getTrustedDevices(e){let s=(0,r.query)((0,r.collection)(t.db,"trustedDevices"),(0,r.where)("userId","==",e),(0,r.orderBy)("lastLogin","desc"));return(await (0,r.getDocs)(s)).docs.map(e=>({id:e.id,...e.data()}))}static async isDeviceTrusted(e){try{let s=await this.generateDeviceFingerprint(),n=await this.generateDeviceId(s),i=(0,r.doc)(t.db,"trustedDevices",`${e}_${n}`),a=await (0,r.getDoc)(i);if(!a.exists())return!1;let o=a.data(),l=r.Timestamp.now();if(o.trustExpires&&o.trustExpires<l)return!1;return o.isTrusted}catch(e){return console.error("Error checking device trust:",e),!1}}static async revokeDeviceTrust(e){let s=(0,r.doc)(t.db,"trustedDevices",e);await (0,r.updateDoc)(s,{isTrusted:!1,rememberMe:!1,updatedAt:r.Timestamp.now()})}static calculateSecurityLevel(e){let t=0;e.platform.includes("Mac")||e.platform.includes("Linux")?t+=2:e.platform.includes("Win")&&(t+=1);let[r,s]=e.screenResolution.split("x").map(Number);return(r>=1920&&s>=1080?t+=2:r>=1366&&s>=768&&(t+=1),e.cookieEnabled&&(t+=1),["America/New_York","America/Los_Angeles","Europe/London","Europe/Paris","Asia/Tokyo"].includes(e.timezone)&&(t+=1),t>=5)?"high":t>=3?"medium":"low"}}class i{static SESSION_COOKIE="spendflow_session";static REFRESH_COOKIE="spendflow_refresh";static async createPersistentSession(e,n){let i=s(),a=s(),o=s(),l=new Date(Date.now()+6048e5),c=new Date(Date.now()+7776e6),u={userId:e,deviceId:n,sessionToken:a,refreshToken:o,expiresAt:r.Timestamp.fromDate(l),createdAt:r.Timestamp.now(),lastUsed:r.Timestamp.now(),ipAddress:await this.getClientIP(),userAgent:navigator.userAgent,isActive:!0},d=(0,r.doc)(t.db,"persistentSessions",i);return await (0,r.setDoc)(d,u),this.setSecureCookie(this.SESSION_COOKIE,a,l),this.setSecureCookie(this.REFRESH_COOKIE,o,c),{id:i,...u}}static async validatePersistentSession(){let e=this.getCookie(this.SESSION_COOKIE),s=this.getCookie(this.REFRESH_COOKIE);if(!e)return null;try{let n=(0,r.query)((0,r.collection)(t.db,"persistentSessions"),(0,r.where)("sessionToken","==",e),(0,r.where)("isActive","==",!0),(0,r.limit)(1)),i=await (0,r.getDocs)(n);if(i.empty)return null;let a=i.docs[0].data();if(a.expiresAt<r.Timestamp.now()){if(s&&a.refreshToken===s)return await this.refreshSession(a.id);return null}return await (0,r.updateDoc)((0,r.doc)(t.db,"persistentSessions",a.id),{lastUsed:r.Timestamp.now()}),a.userId}catch(e){return console.error("Error validating persistent session:",e),null}}static async refreshSession(e){try{let n=(0,r.doc)(t.db,"persistentSessions",e),i=await (0,r.getDoc)(n);if(!i.exists())return null;let a=i.data(),o=s(),l=new Date(Date.now()+6048e5);return await (0,r.updateDoc)(n,{sessionToken:o,expiresAt:r.Timestamp.fromDate(l),lastUsed:r.Timestamp.now()}),this.setSecureCookie(this.SESSION_COOKIE,o,l),a.userId}catch(e){return console.error("Error refreshing session:",e),null}}static async endPersistentSession(){this.deleteCookie(this.SESSION_COOKIE),this.deleteCookie(this.REFRESH_COOKIE);try{let e=this.getCookie(this.SESSION_COOKIE);if(e){let s=(0,r.query)((0,r.collection)(t.db,"persistentSessions"),(0,r.where)("sessionToken","==",e),(0,r.limit)(1)),n=await (0,r.getDocs)(s);n.empty||await (0,r.updateDoc)((0,r.doc)(t.db,"persistentSessions",n.docs[0].id),{isActive:!1})}}catch(e){console.error("Error ending persistent session:",e)}}static async cleanupExpiredSessions(){try{let e=r.Timestamp.now(),s=(0,r.query)((0,r.collection)(t.db,"persistentSessions"),(0,r.where)("expiresAt","<",e)),n=(await (0,r.getDocs)(s)).docs.map(e=>(0,r.deleteDoc)(e.ref));return await Promise.all(n),console.log(`Cleaned up ${n.length} old alerts`),n.length}catch{return console.error("Error cleaning up expired sessions"),0}}static setSecureCookie(e,t,r){let s=`${e}=${t}; expires=${r.toUTCString()}; path=/; secure; httponly; samesite=strict`;document.cookie=s}static getCookie(e){let t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length&&t.pop()?.split(";").shift()||null}static deleteCookie(e){let t=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;document.cookie=t}static async getClientIP(){try{return"unknown"}catch{return"unknown"}}}e.s(["DeviceManagementService",()=>n,"PersistentAuthService",()=>i])},8936,e=>{"use strict";var t=e.i(52621),r=e.i(82078),s=e.i(20976);e.i(32234);var n=e.i(98466),i=e.i(41195),a=e.i(2188),o=e.i(11943),l=e.i(84099),c=e.i(41530),u=e.i(87432);function d(){let[e,l]=(0,r.useState)(""),[d,f]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[y,x]=(0,r.useState)(!1),w=(0,s.useRouter)(),{user:j,loading:E}=(0,a.useAuth)();(0,r.useEffect)(()=>{!E&&j&&w.replace("/dashboard")},[j,E,w]);let S=async t=>{t.preventDefault(),h(!0),g("");try{await (0,n.signInWithEmailAndPassword)(i.auth,e,d);let t=i.auth.currentUser,r=!!t?.email&&("spendflowapp@gmail.com".split(",")||[]).includes(t.email);if(t)try{let e=`${navigator.platform} ${navigator.userAgent.split(" ").pop()}`;await u.DeviceManagementService.registerDevice(t.uid,e,y),y&&await u.PersistentAuthService.createPersistentSession(t.uid,await u.DeviceManagementService.generateDeviceId(await u.DeviceManagementService.generateDeviceFingerprint()))}catch(e){console.error("Error registering device:",e)}w.replace(r?"/admin":"/dashboard")}catch(t){let e=(0,c.getFirebaseAuthError)(t);g(`${e.title}: ${e.message}${e.suggestion?` ${e.suggestion}`:""}`)}finally{h(!1)}},k=async()=>{h(!0),g("");try{let e=new n.GoogleAuthProvider,t=(await (0,n.signInWithPopup)(i.auth,e)).user,r=!!t.email&&("spendflowapp@gmail.com".split(",")||[]).includes(t.email);try{let e=`${navigator.platform} ${navigator.userAgent.split(" ").pop()}`;await u.DeviceManagementService.registerDevice(t.uid,e,y),y&&await u.PersistentAuthService.createPersistentSession(t.uid,await u.DeviceManagementService.generateDeviceId(await u.DeviceManagementService.generateDeviceFingerprint()))}catch(e){console.error("Error registering device:",e)}w.replace(r?"/admin":"/dashboard")}catch(t){let e=(0,c.getFirebaseAuthError)(t);g(`${e.title}: ${e.message}${e.suggestion?` ${e.suggestion}`:""}`)}finally{h(!1)}},P=async()=>{if(!e)return void g("Please enter your email address first");h(!0),g("");try{await (0,n.sendPasswordResetEmail)(i.auth,e),v(!0)}catch(t){let e=(0,c.getFirebaseAuthError)(t);g(`${e.title}: ${e.message}${e.suggestion?` ${e.suggestion}`:""}`)}finally{h(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-linear-to-br from-slate-950 via-slate-900 to-slate-950 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-0.5 bg-linear-to-r from-transparent via-amber-400 to-transparent mx-auto mb-8"}),(0,t.jsx)("h1",{className:"text-5xl font-serif text-slate-100 mb-4 tracking-wide",children:"S P E N D F L O W"}),(0,t.jsx)("div",{className:"w-24 h-0.5 bg-linear-to-r from-transparent via-amber-400 to-transparent mx-auto mb-6"}),(0,t.jsx)("h2",{className:"text-2xl font-serif text-slate-100 mb-2 tracking-wide",children:"Welcome Back"}),(0,t.jsx)("p",{className:"text-slate-400 text-sm tracking-wider",children:"Sign in to access your financial dashboard"}),(0,t.jsxs)("p",{className:"mt-4 text-center text-sm text-slate-500",children:["Don't have an account?"," ",(0,t.jsx)(o.default,{href:"/signup",className:"font-serif text-amber-400 hover:text-amber-300 tracking-wide",children:"Create one"})]})]}),b&&(0,t.jsx)("div",{className:"bg-green-900/20 border border-green-700/30 p-4 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"ml-3",children:(0,t.jsx)("p",{className:"text-sm text-green-300",children:"Password reset email sent! Check your inbox."})})]})}),m&&(0,t.jsx)("div",{className:"bg-red-900/20 border border-red-700/30 p-4 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"ml-3",children:(0,t.jsx)("p",{className:"text-sm text-red-300",children:m})})]})}),(0,t.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 backdrop-blur-sm p-8 space-y-6",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("button",{onClick:k,disabled:p,className:"group relative w-full flex justify-center py-3 px-4 border border-slate-700 text-sm font-serif tracking-wider bg-slate-800/50 text-slate-200 hover:bg-slate-800 hover:border-amber-600/50 focus:outline-none focus:ring-2 focus:ring-amber-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-4",children:(0,t.jsxs)("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),(0,t.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),(0,t.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),(0,t.jsx)("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]})}),"Continue with Google"]})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-slate-700"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-xs",children:(0,t.jsx)("span",{className:"px-3 bg-slate-900/50 text-slate-500 tracking-widest uppercase",children:"Or continue with email"})})]}),(0,t.jsxs)("form",{className:"space-y-4",onSubmit:S,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email-address",className:"block text-xs tracking-widest uppercase text-slate-500 mb-2 font-serif",children:"Email Address"}),(0,t.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 bg-slate-800/50 border border-slate-700 text-slate-200 placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"your@email.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-xs tracking-widest uppercase text-slate-500 mb-2 font-serif",children:"Password"}),(0,t.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:d,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 bg-slate-800/50 border border-slate-700 text-slate-200 placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Enter your password"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"remember-device",name:"remember-device",type:"checkbox",checked:y,onChange:e=>x(e.target.checked),className:"h-4 w-4 bg-slate-800 border-slate-700 text-amber-600 focus:ring-amber-500"}),(0,t.jsx)("label",{htmlFor:"remember-device",className:"ml-2 block text-slate-400 tracking-wide",children:"Remember this device"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"button",onClick:P,className:"font-serif text-amber-400 hover:text-amber-300 tracking-wide",children:"Forgot password?"})})]}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)("button",{type:"submit",disabled:p,className:"w-full flex justify-center py-3 px-4 border border-amber-600 text-amber-400 bg-amber-900/10 hover:bg-amber-600/20 focus:outline-none focus:ring-2 focus:ring-amber-500 font-serif tracking-widest uppercase text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Signing in...":"Sign In"})})]})]}),(0,t.jsx)("div",{className:"text-center pt-8 border-t border-slate-800",children:(0,t.jsx)("p",{className:"text-slate-500 text-sm font-serif italic",children:'"Manage your wealth with elegance and precision."'})})]})})}function f(){return(0,t.jsx)(l.AuthGate,{requireAuth:!1,children:(0,t.jsx)(d,{})})}e.s(["default",()=>f])}]);